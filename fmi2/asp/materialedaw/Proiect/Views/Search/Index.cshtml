@model SearchViewModel
@{
    ViewData["Title"] = string.IsNullOrWhiteSpace(Model.Query) ? "Search" : $"Search: {Model.Query}";
}

<section class="search-page py-4">
    <div class="container">
        @* Search Header *@
        <div class="search-header mb-4">
            <h1 class="h3 mb-2">
                <i class="bi bi-search me-2"></i>Search Bookmarks
            </h1>
            <p class="text-muted mb-0">
                Find bookmarks by title, description, or tags.
                <span class="search-shortcut-hint ms-2">
                    <kbd>/</kbd> to focus
                </span>
            </p>
        </div>

        @* Search Form *@
        <partial name="_SearchForm" model="Model" />

        @* Active Filters Chips *@
        <partial name="_FilterChips" model="Model" />

        @* Recent Searches *@
        <div class="recent-searches mb-4 d-none" id="recent-searches">
            <div class="d-flex align-items-center gap-2 mb-2">
                <i class="bi bi-clock-history text-muted"></i>
                <span class="text-muted small">Recent searches:</span>
            </div>
            <div class="d-flex flex-wrap gap-2" id="recent-searches-list">
                @* Populated by JavaScript *@
            </div>
        </div>

        @* Search Results Container *@
        <div id="search-results">
            @if (Model.HasSearchCriteria)
            {
                <partial name="_SearchResults" model="Model" />
            }
            else
            {
                <partial name="_SearchSuggestions" model="Model" />
            }
        </div>

        @* Skeleton Loading Template (hidden) *@
        <template id="skeleton-template">
            <div class="masonry-grid">
                @for (var i = 0; i < 6; i++)
                {
                    <div class="col">
                        <div class="bookmark-card skeleton-card">
                            <div class="skeleton-media"></div>
                            <div class="bookmark-card__body">
                                <div class="skeleton-title"></div>
                                <div class="skeleton-description"></div>
                                <div class="skeleton-description short"></div>
                            </div>
                            <div class="bookmark-card__meta">
                                <div class="skeleton-meta"></div>
                                <div class="skeleton-stats"></div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </template>
    </div>
</section>

@section Styles {
    <link rel="stylesheet" href="~/css/search.css" asp-append-version="true" />
}

@section Scripts {
    <script src="~/js/search.js" asp-append-version="true"></script>
}
